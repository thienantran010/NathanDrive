import{u as L,b as V}from"./vue-router-128bc7ad.js";import{_ as M}from"./index-29e2e257.js";import{j,r as g,ag as v,o as i,c as u,a as s,V as y,P as d,T as k,O as h,F as C,S as f,U as I,u as E,bh as P,bf as U}from"./@vue-7298a6f3.js";import"./element-plus-857d32b3.js";import"./lodash-es-36eb724a.js";import"./@vueuse-740eda15.js";import"./@element-plus-925c7e21.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-c95324ad.js";import"./aplayer-d80f7f58.js";import"./async-validator-10c6301d.js";import"./memoize-one-297ddbcb.js";import"./escape-html-85da7166.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-d10d3e5d.js";import"./vue-cookies-9b55b892.js";import"./@highlightjs-b388fc70.js";import"./highlight.js-cc51af62.js";import"./axios-4a70c6fc.js";import"./docx-preview-b41ea745.js";import"./jszip-d9c085e9.js";import"./xlsx-04f2268f.js";import"./vue-pdf-embed-acd0b5a4.js";import"./vue-9ac0364e.js";import"./dplayer-ff9c2365.js";import"./vue-clipboard3-abb1cd37.js";import"./clipboard-2fdbe17c.js";const T=p=>(P("data-v-c1fa5e9e"),p=p(),U(),p),H={class:"top"},A=T(()=>s("span",{class:"iconfont icon-revert"},null,-1)),G=T(()=>s("span",{class:"iconfont icon-del"},null,-1)),J={class:"file-list"},K=["onMouseenter","onMouseleave"],Q=["title"],W={class:"op"},X=["onClick"],Y=["onClick"],Z={key:0},ee={__name:"Recycle",emits:["reload"],setup(p,{emit:S}){const{proxy:l}=j();L(),V();const n={loadDataList:"/recycle/loadRecycleList",delFile:"/recycle/delFile",recoverFile:"/recycle/recoverFile"},N=[{label:"file name",prop:"fileName",scopedSlots:"fileName"},{label:"delete time",prop:"recoveryTime",width:200},{label:"size",prop:"fileSize",scopedSlots:"fileSize",width:200}],r=g({}),F={extHeight:20,selectType:"checkbox"},c=async()=>{let e={pageNo:r.value.pageNo,pageSize:r.value.pageSize};e.category!=="all"&&delete e.filePid;let o=await l.Request({url:n.loadDataList,params:e});o&&(r.value=o.data)},R=e=>{r.value.list.forEach(o=>{o.showOp=!1}),e.showOp=!0},x=e=>{e.showOp=!1},a=g([]),z=e=>{a.value=[],e.forEach(o=>{a.value.push(o.fileId)})},O=e=>{l.Confirm(`you really want to recover【${e.fileName}】？`,async()=>{await l.Request({url:n.recoverFile,params:{fileIds:e.fileId}})&&c()})},w=()=>{a.value.length!=0&&l.Confirm("Do you really want to recover these files？",async()=>{await l.Request({url:n.recoverFile,params:{fileIds:a.value.join(",")}})&&c()})},B=e=>{l.Confirm(`you want to delete these files【${e.fileName}】？`,async()=>{await l.Request({url:n.delFile,params:{fileIds:e.fileId}})&&(c(),S("reload"))})},D=e=>{a.value.length!=0&&l.Confirm("you really want to remove selected files? remove means no recover",async()=>{await l.Request({url:n.delFile,params:{fileIds:a.value.join(",")}})&&(c(),S("reload"))})};return(e,o)=>{const b=v("el-button"),m=v("icon"),$=v("Table");return i(),u("div",null,[s("div",H,[y(b,{type:"success",disabled:a.value.length==0,onClick:w},{default:d(()=>[A,k("recover ")]),_:1},8,["disabled"]),y(b,{type:"danger",disabled:a.value.length==0,onClick:D},{default:d(()=>[G,k("multiple delete ")]),_:1},8,["disabled"])]),s("div",J,[y($,{columns:N,showPagination:!0,dataSource:r.value,fetch:c,options:F,onRowSelected:z},{fileName:d(({index:q,row:t})=>[s("div",{class:"file-item",onMouseenter:_=>R(t),onMouseleave:_=>x(t)},[(t.fileType==3||t.fileType==1)&&t.status!==0?(i(),h(m,{key:0,cover:t.fileCover},null,8,["cover"])):(i(),u(C,{key:1},[t.folderType==0?(i(),h(m,{key:0,fileType:t.fileType},null,8,["fileType"])):f("",!0),t.folderType==1?(i(),h(m,{key:1,fileType:0})):f("",!0)],64)),s("span",{class:"file-name",title:t.fileName},[s("span",null,I(t.fileName),1)],8,Q),s("span",W,[t.showOp&&t.fileId?(i(),u(C,{key:0},[s("span",{class:"iconfont icon-revert",onClick:_=>O(t)},"recover",8,X),s("span",{class:"iconfont icon-del",onClick:_=>B(t)},"delete",8,Y)],64)):f("",!0)])],40,K)]),fileSize:d(({index:q,row:t})=>[t.fileSize?(i(),u("span",Z,I(E(l).Utils.size2Str(t.fileSize)),1)):f("",!0)]),_:1},8,["dataSource"])])])}}},xe=M(ee,[["__scopeId","data-v-c1fa5e9e"]]);export{xe as default};
